<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Your View | Falcamel · The Escarpment</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --burgundy: #722F37;
            --burgundy-deep: #4A1F24;
            --cream: #FAF6F0;
            --night: #1A1614;
            --night-light: #2A2420;
            --sunset: #E67E4A;
            --gold: #D4A853;
            --success: #7ed99a;
            --error: #E67E4A;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', sans-serif;
            background: url('hero.jpg') center top / cover no-repeat fixed;
            color: var(--cream);
            line-height: 1.6;
            min-height: 100vh;
        }

        h1, h2, h3 { font-family: 'Oswald', sans-serif; font-weight: 600; text-transform: uppercase; letter-spacing: 0.02em; line-height: 1.1; }

        .page { min-height: 100vh; padding: 1.5rem 2rem 3rem; }

        .booking-card {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(26, 22, 20, 0.95);
            border: 1px solid var(--burgundy);
            padding: 1.5rem 2.5rem 2.5rem;
        }

        .booking-header { margin-bottom: 1.25rem; }
        .booking-header h1 { font-size: 2.5rem; color: var(--cream); }

        .section { margin-bottom: 1rem; }
        .section-label {
            font-family: 'Oswald', sans-serif;
            font-size: 0.75rem;
            font-weight: 500;
            color: var(--sunset);
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.15em;
        }

        .date-pills { display: flex; gap: 0.5rem; overflow-x: auto; padding-bottom: 0.5rem; }
        .date-pill {
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0.5rem 0.875rem;
            border: 1px solid var(--burgundy);
            background: transparent;
            color: var(--cream);
            cursor: pointer;
            transition: all 0.15s;
            min-width: 60px;
        }
        .date-pill:hover { border-color: var(--sunset); }
        .date-pill.selected { background: var(--sunset); border-color: var(--sunset); color: var(--night); }
        .date-pill .day { font-size: 0.6rem; text-transform: uppercase; letter-spacing: 0.1em; opacity: 0.6; }
        .date-pill .num { font-family: 'Oswald', sans-serif; font-size: 1.25rem; font-weight: 600; }
        .date-pill.selected .day { opacity: 1; }
        .date-pill svg { width: 18px; height: 18px; }

        .calendar-dropdown { position: relative; }
        .calendar-panel {
            display: none; position: absolute; top: 0.5rem; left: 0;
            background: var(--night); border: 1px solid var(--burgundy);
            padding: 1rem; z-index: 100; min-width: 280px;
        }
        .calendar-panel.open { display: block; }
        .calendar-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; }
        .calendar-month { font-family: 'Oswald', sans-serif; font-weight: 600; font-size: 0.9rem; text-transform: uppercase; }
        .calendar-nav { display: flex; gap: 0.25rem; }
        .calendar-nav button { width: 28px; height: 28px; background: var(--night-light); border: 1px solid var(--burgundy); color: var(--cream); cursor: pointer; }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 2px; text-align: center; }
        .calendar-weekday { font-size: 0.6rem; font-weight: 500; color: var(--sunset); text-transform: uppercase; padding: 0.5rem 0; }
        .calendar-day { aspect-ratio: 1; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; cursor: pointer; }
        .calendar-day:hover:not(.empty):not(.past) { background: var(--night-light); }
        .calendar-day.past { opacity: 0.3; cursor: not-allowed; }
        .calendar-day.selected { background: var(--sunset); color: var(--night); font-weight: 600; }
        .calendar-day.today { border: 1px solid var(--sunset); }

        .time-grid { display: flex; flex-wrap: wrap; gap: 0.5rem; }
        .time-slot {
            padding: 0.5rem 0.875rem; border: 1px solid var(--burgundy); background: transparent;
            color: var(--cream); cursor: pointer; font-size: 0.875rem; transition: all 0.15s;
        }
        .time-slot:hover { border-color: var(--sunset); }
        .time-slot.selected { background: var(--sunset); border-color: var(--sunset); color: var(--night); }

        .duration-grid { display: flex; gap: 0.5rem; }
        .duration-btn {
            padding: 0.5rem 1rem; border: 1px solid var(--burgundy); background: transparent;
            color: var(--cream); cursor: pointer; font-size: 0.875rem; transition: all 0.15s;
        }
        .duration-btn:hover { border-color: var(--sunset); }
        .duration-btn.selected { background: var(--sunset); border-color: var(--sunset); color: var(--night); }
        .duration-note { margin-top: 0.5rem; font-size: 0.7rem; color: var(--sunset); opacity: 0.7; }

        .companion-section { display: none; }
        .companion-section.visible { display: block; }
        .companion-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; }
        @media (max-width: 700px) { .companion-grid { grid-template-columns: 1fr; } }

        .companion-card {
            background: var(--night-light); border: 1px solid var(--burgundy);
            padding: 1.25rem; transition: all 0.15s;
        }
        .companion-card:hover:not(.unavailable) { border-color: var(--sunset); }
        .companion-card.unavailable { opacity: 0.5; }
        .companion-card-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 0.5rem; }
        .companion-name { font-family: 'Oswald', sans-serif; font-size: 1.5rem; font-weight: 600; text-transform: uppercase; }
        .companion-badge { font-size: 0.55rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.1em; padding: 0.25rem 0.5rem; }
        .companion-badge.available { background: rgba(126, 217, 154, 0.15); color: var(--success); }
        .companion-badge.booked { background: rgba(230, 126, 74, 0.15); color: var(--error); }
        .companion-tagline { font-size: 0.8rem; opacity: 0.6; margin-bottom: 0.75rem; }
        .companion-features { display: flex; flex-wrap: wrap; gap: 0.375rem; margin-bottom: 0.75rem; }
        .companion-feature { font-size: 0.65rem; padding: 0.2rem 0.5rem; background: rgba(114, 47, 55, 0.5); text-transform: uppercase; letter-spacing: 0.05em; }
        .companion-footer { display: flex; justify-content: space-between; align-items: center; }
        .companion-price strong { font-family: 'Oswald', sans-serif; font-size: 1.25rem; font-weight: 600; color: var(--sunset); }
        .companion-price span { font-size: 0.75rem; opacity: 0.6; }
        .book-btn {
            padding: 0.5rem 1rem; background: var(--sunset); color: var(--night); border: none;
            font-family: 'Oswald', sans-serif; font-size: 0.8rem; font-weight: 600; text-transform: uppercase;
            letter-spacing: 0.1em; cursor: pointer; transition: all 0.15s;
        }
        .book-btn:hover { background: var(--gold); }

        .full-package {
            margin-top: 1rem; padding: 1.25rem;
            background: linear-gradient(135deg, var(--burgundy) 0%, var(--burgundy-deep) 100%);
            display: none;
        }
        .full-package.visible { display: block; }
        .full-package-header { display: flex; align-items: center; gap: 1rem; margin-bottom: 0.5rem; }
        .full-package h3 { font-size: 1.5rem; color: var(--cream); }
        .full-package-badge { font-size: 0.55rem; font-weight: 600; text-transform: uppercase; padding: 0.25rem 0.5rem; border-radius: 100px; }
        .full-package-badge.available { background: rgba(126, 217, 154, 0.2); color: var(--success); }
        .full-package-subtitle { font-size: 0.8rem; opacity: 0.7; margin-bottom: 0.75rem; }
        .full-package-footer { display: flex; justify-content: space-between; align-items: center; padding-top: 0.75rem; border-top: 1px solid rgba(250,246,240,0.1); }
        .full-package-price { font-family: 'Oswald', sans-serif; font-size: 2rem; font-weight: 700; }
        .full-package-price span { font-size: 0.8rem; font-weight: 400; opacity: 0.6; }
        .full-package-btn {
            padding: 0.625rem 1.25rem; background: var(--gold); color: var(--night); border: none;
            font-family: 'Oswald', sans-serif; font-size: 0.875rem; font-weight: 600; text-transform: uppercase;
            letter-spacing: 0.1em; cursor: pointer;
        }
        .full-package-btn:hover { background: var(--cream); }

        .footer { max-width: 1000px; margin: 1.5rem auto 0; text-align: center; font-size: 0.7rem; opacity: 0.5; }
        .footer a { color: var(--sunset); text-decoration: none; }

        .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(26, 22, 20, 0.95); z-index: 1000; overflow-y: auto; padding: 1.5rem 2rem 3rem; display: none; }
        .modal { max-width: 1000px; margin: 0 auto; background: var(--night); border: 1px solid var(--burgundy); padding: 1.5rem 2.5rem 2.5rem; position: relative; }
        .modal-close { position: absolute; top: 1.5rem; right: 1.5rem; background: none; border: 1px solid var(--burgundy); color: var(--sunset); font-size: 1.25rem; width: 40px; height: 40px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .modal-close:hover { border-color: var(--sunset); }
        .modal-header { margin-bottom: 1.25rem; }
        .modal-header h1 { font-size: 2rem; }
        .modal-section { background: var(--night-light); border: 1px solid var(--burgundy); padding: 1.25rem; margin-bottom: 1rem; }
        .modal-section-title { font-family: 'Oswald', sans-serif; font-size: 1rem; text-transform: uppercase; letter-spacing: 0.1em; color: var(--sunset); margin-bottom: 0.75rem; }
        .summary-row { display: flex; justify-content: space-between; font-size: 0.875rem; margin-bottom: 0.375rem; }
        .summary-row span:first-child { opacity: 0.6; }
        .summary-row.total { padding-top: 0.75rem; margin-top: 0.5rem; border-top: 1px solid var(--burgundy); font-weight: 600; }
        .summary-row.total span:last-child { color: var(--sunset); font-size: 1.125rem; }
        .included-details { margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--burgundy); }
        .included-title { font-size: 0.75rem; color: var(--sunset); margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.1em; }
        .included-details ul { list-style: none; font-size: 0.8rem; opacity: 0.8; }
        .included-details li { margin-bottom: 0.25rem; }
        .included-details li::before { content: '✓ '; color: var(--success); }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
        .form-field { margin-bottom: 0.875rem; }
        .form-field label { display: block; font-size: 0.75rem; color: var(--sunset); margin-bottom: 0.375rem; text-transform: uppercase; letter-spacing: 0.05em; }
        .form-field input { width: 100%; padding: 0.625rem 0.875rem; background: var(--night); border: 1px solid var(--burgundy); font-size: 0.875rem; color: var(--cream); }
        .form-field input:focus { outline: none; border-color: var(--sunset); }
        .section-subtitle { font-size: 0.75rem; opacity: 0.6; margin-bottom: 0.5rem; }
        .occasion-pills { display: flex; flex-wrap: wrap; gap: 0.5rem; }
        .occasion-pill { padding: 0.4rem 0.875rem; background: var(--night); border: 1px solid var(--burgundy); font-size: 0.75rem; color: var(--cream); cursor: pointer; transition: all 0.15s; }
        .occasion-pill:hover { border-color: var(--sunset); }
        .occasion-pill.selected { background: var(--sunset); border-color: var(--sunset); color: var(--night); }
        .notes-field { width: 100%; min-height: 80px; padding: 0.625rem 0.875rem; background: var(--night); border: 1px solid var(--burgundy); font-size: 0.875rem; color: var(--cream); font-family: inherit; resize: vertical; }
        .notes-field:focus { outline: none; border-color: var(--sunset); }
        .complete-btn { width: 100%; padding: 0.875rem; background: var(--sunset); color: var(--night); border: none; font-family: 'Oswald', sans-serif; font-size: 1rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.1em; cursor: pointer; }
        .complete-btn:hover { background: var(--gold); }
    </style>
</head>
<body>
    <div class="page">
        <div class="booking-card">
            <div class="booking-header"><h1>Book Your View</h1></div>

            <div class="section">
                <div class="section-label">Select Date</div>
                <div class="date-pills" id="datePills"></div>
                <div class="calendar-dropdown"><div class="calendar-panel" id="calendarPanel">
                    <div class="calendar-header"><span class="calendar-month" id="calendarMonth">January 2026</span><div class="calendar-nav"><button onclick="prevMonth()">‹</button><button onclick="nextMonth()">›</button></div></div>
                    <div class="calendar-grid" id="calendarGrid"></div>
                </div></div>
            </div>

            <div class="section">
                <div class="section-label">Start Time</div>
                <div class="time-grid" id="timeGrid"></div>
            </div>

            <div class="section">
                <div class="section-label">Duration</div>
                <div class="duration-grid" id="durationGrid"></div>
                <div class="duration-note">Maximum 4 hours per reservation</div>
            </div>

            <div class="section companion-section" id="companionSection">
                <div class="section-label">Choose Your Companion</div>
                <div class="companion-grid">
                    <div class="companion-card" data-companion="sultan" data-base-price="350">
                        <div class="companion-card-header"><span class="companion-name">Sultan</span><span class="companion-badge available">Available</span></div>
                        <p class="companion-tagline">Arrives with falconer. Perches at your table. Photos, videos, content.</p>
                        <div class="companion-features"><span class="companion-feature">12 seats</span><span class="companion-feature">Falcon Flight</span><span class="companion-feature">2 beverages</span><span class="companion-feature">Falconer</span><span class="companion-feature">Photo session</span></div>
                        <div class="companion-footer"><span class="companion-price"><strong>SAR 350</strong> <span>/ hour</span></span><button class="book-btn" onclick="bookCompanion('sultan')">Book Now</button></div>
                    </div>
                    <div class="companion-card" data-companion="haboob" data-base-price="250">
                        <div class="companion-card-header"><span class="companion-name">Haboob</span><span class="companion-badge available">Available</span></div>
                        <p class="companion-tagline">Stations at your table. Milk service. Unlimited photo ops.</p>
                        <div class="companion-features"><span class="companion-feature">8 seats</span><span class="companion-feature">Camel Ride</span><span class="companion-feature">2 beverages</span><span class="companion-feature">Camel milk latte</span><span class="companion-feature">Handler</span></div>
                        <div class="companion-footer"><span class="companion-price"><strong>SAR 250</strong> <span>/ hour</span></span><button class="book-btn" onclick="bookCompanion('haboob')">Book Now</button></div>
                    </div>
                    <div class="companion-card" data-companion="shams" data-base-price="150">
                        <div class="companion-card-header"><span class="companion-name">Shams</span><span class="companion-badge available">Available</span></div>
                        <p class="companion-tagline">Roams your area. May appear. May not. That's the content.</p>
                        <div class="companion-features"><span class="companion-feature">8 seats</span><span class="companion-feature">2 beverages</span><span class="companion-feature">No guarantees</span></div>
                        <div class="companion-footer"><span class="companion-price"><strong>SAR 150</strong> <span>/ hour</span></span><button class="book-btn" onclick="bookCompanion('shams')">Book Now</button></div>
                    </div>
                    <div class="companion-card" data-companion="qamar" data-base-price="150">
                        <div class="companion-card-header"><span class="companion-name">Qamar</span><span class="companion-badge available">Available</span></div>
                        <p class="companion-tagline">Claims cushion near you. Stays for sunset. Purrs on cue.</p>
                        <div class="companion-features"><span class="companion-feature">8 seats</span><span class="companion-feature">2 beverages</span><span class="companion-feature">Sunset priority</span></div>
                        <div class="companion-footer"><span class="companion-price"><strong>SAR 150</strong> <span>/ hour</span></span><button class="book-btn" onclick="bookCompanion('qamar')">Book Now</button></div>
                    </div>
                </div>
            </div>

            <div class="full-package" id="fullPackage">
                <div class="full-package-header"><h3>The Race</h3><span class="full-package-badge available">Available</span></div>
                <p class="full-package-subtitle">Once per evening · 4 guests max · 3-hour experience · All footage yours</p>
                <div class="full-package-footer"><span class="full-package-price">SAR 4,000 <span>/ evening</span></span><button class="full-package-btn" onclick="bookFullPackage()">Book The Race →</button></div>
            </div>
        </div>

        <footer class="footer"><p>Falcamel Café · Tuwaiq Escarpment, Qiddiya · Powered by <a href="#">OSKAR</a></p></footer>

        <div class="modal-overlay" id="confirmModal">
            <div class="modal">
                <button class="modal-close" onclick="closeModal()">✕</button>
                <div class="modal-header"><h1>Complete Your Reservation</h1></div>
                <div class="modal-section">
                    <h2 class="modal-section-title">Reservation Details</h2>
                    <div class="summary-row"><span>Companion</span><span id="summaryCompanion">Sultan</span></div>
                    <div class="summary-row"><span>Date</span><span id="summaryDate">Sat, Jan 4</span></div>
                    <div class="summary-row"><span>Time</span><span id="summaryTime">6 PM</span></div>
                    <div class="summary-row"><span>Duration</span><span id="summaryDuration">2 hours</span></div>
                    <div class="summary-row total"><span>Total</span><span id="summaryTotal">SAR 700</span></div>
                    <div class="included-details"><p class="included-title">What's included:</p><ul id="includedList"></ul></div>
                </div>
                <div class="modal-section">
                    <h2 class="modal-section-title">Guest Information</h2>
                    <div class="form-row"><div class="form-field"><label>First Name</label><input type="text" placeholder="First name"></div><div class="form-field"><label>Last Name</label><input type="text" placeholder="Last name"></div></div>
                    <div class="form-field"><label>Email</label><input type="email" placeholder="email@example.com"></div>
                    <div class="form-field"><label>Phone</label><input type="tel" placeholder="+966 XX XXX XXXX"></div>
                </div>
                <div class="modal-section">
                    <h2 class="modal-section-title">Special Occasion</h2>
                    <p class="section-subtitle">Celebrating something?</p>
                    <div class="occasion-pills">
                        <button class="occasion-pill selected" onclick="selectOccasion(this)">None</button>
                        <button class="occasion-pill" onclick="selectOccasion(this)">Birthday</button>
                        <button class="occasion-pill" onclick="selectOccasion(this)">Anniversary</button>
                        <button class="occasion-pill" onclick="selectOccasion(this)">Content Shoot</button>
                        <button class="occasion-pill" onclick="selectOccasion(this)">Proposal</button>
                        <button class="occasion-pill" onclick="selectOccasion(this)">Other</button>
                    </div>
                </div>
                <div class="modal-section"><h2 class="modal-section-title">Additional Notes</h2><textarea class="notes-field" placeholder="Any special requests?"></textarea></div>
                <button class="complete-btn" onclick="completeReservation()">Complete Reservation</button>
            </div>
        </div>
    </div>

    <script>
        let selectedDate = null, selectedTime = null, selectedTimeHour = null, selectedDuration = 1, currentMonth = new Date();
        const companionInfo = {
            sultan: { name: "Sultan", basePrice: 350, included: ["12 seats", "Falcon Flight", "2 beverages", "Falconer", "Photo session", "Edge seating"] },
            haboob: { name: "Haboob", basePrice: 250, included: ["8 seats", "Camel Ride", "2 beverages", "Camel milk latte", "Handler", "Edge seating"] },
            shams: { name: "Shams", basePrice: 150, included: ["8 seats", "2 beverages", "No guarantees", "Edge seating"] },
            qamar: { name: "Qamar", basePrice: 150, included: ["8 seats", "2 beverages", "Sunset priority", "Edge seating"] },
            fullpackage: { name: "The Race", basePrice: 4000, included: ["3-hour experience", "4 guests maximum", "All footage yours", "Sultan races Falcon's Flight", "Binoculars & live feed", "All residents"] }
        };

        function generateDatePills() {
            const container = document.getElementById('datePills'), today = new Date(), days = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
            const calPill = document.createElement('button'); calPill.className = 'date-pill';
            calPill.innerHTML = '<span class="day">Calendar</span><span class="num"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg></span>';
            calPill.onclick = () => document.getElementById('calendarPanel').classList.toggle('open'); container.appendChild(calPill);
            for (let i = 0; i < 10; i++) { const date = new Date(today); date.setDate(today.getDate() + i); const pill = document.createElement('button'); pill.className = 'date-pill'; pill.innerHTML = '<span class="day">' + days[date.getDay()] + '</span><span class="num">' + date.getDate() + '</span>'; pill.onclick = () => selectDate(date, pill); container.appendChild(pill); }
        }
        function selectDate(date, pill) { selectedDate = date; document.querySelectorAll('.date-pill').forEach(p => p.classList.remove('selected')); if (pill) pill.classList.add('selected'); renderCalendar(); checkShowCompanions(); }
        function renderCalendar() {
            const grid = document.getElementById('calendarGrid'), monthLabel = document.getElementById('calendarMonth'), year = currentMonth.getFullYear(), month = currentMonth.getMonth();
            const months = ['January','February','March','April','May','June','July','August','September','October','November','December'];
            monthLabel.textContent = months[month] + ' ' + year;
            const firstDay = new Date(year, month, 1).getDay(), daysInMonth = new Date(year, month + 1, 0).getDate(), today = new Date(); today.setHours(0,0,0,0);
            let html = ['Su','Mo','Tu','We','Th','Fr','Sa'].map(d => '<div class="calendar-weekday">' + d + '</div>').join('');
            for (let i = 0; i < firstDay; i++) html += '<div class="calendar-day empty"></div>';
            for (let day = 1; day <= daysInMonth; day++) { const date = new Date(year, month, day); const isPast = date < today, isToday = date.getTime() === today.getTime(), isSelected = selectedDate && date.getDate() === selectedDate.getDate() && date.getMonth() === selectedDate.getMonth() && date.getFullYear() === selectedDate.getFullYear(); let cls = 'calendar-day'; if (isPast) cls += ' past'; if (isToday) cls += ' today'; if (isSelected) cls += ' selected'; html += '<div class="' + cls + '" onclick="selectCalendarDay(' + day + ',' + month + ',' + year + ')">' + day + '</div>'; }
            grid.innerHTML = html;
        }
        function selectCalendarDay(day, month, year) { const date = new Date(year, month, day), today = new Date(); today.setHours(0,0,0,0); if (date < today) return; selectDate(date); document.getElementById('calendarPanel').classList.remove('open'); }
        function prevMonth() { currentMonth.setMonth(currentMonth.getMonth() - 1); renderCalendar(); }
        function nextMonth() { currentMonth.setMonth(currentMonth.getMonth() + 1); renderCalendar(); }
        function generateTimeSlots() { const grid = document.getElementById('timeGrid'); const times = [{t:'4 PM',h:16},{t:'5 PM',h:17},{t:'6 PM',h:18},{t:'7 PM',h:19},{t:'8 PM',h:20},{t:'9 PM',h:21},{t:'10 PM',h:22},{t:'11 PM',h:23},{t:'12 AM',h:24},{t:'1 AM',h:25}]; grid.innerHTML = times.map(t => '<button class="time-slot" onclick="selectTime(this,\'' + t.t + '\',' + t.h + ')">' + t.t + '</button>').join(''); }
        function selectTime(el, time, hour) { selectedTime = time; selectedTimeHour = hour; document.querySelectorAll('.time-slot').forEach(s => s.classList.remove('selected')); el.classList.add('selected'); checkShowCompanions(); }
        function generateDuration() { const grid = document.getElementById('durationGrid'); grid.innerHTML = [1,2,3,4].map(d => '<button class="duration-btn' + (d===1?' selected':'') + '" onclick="selectDuration(this,' + d + ')">' + d + ' hour' + (d>1?'s':'') + '</button>').join(''); }
        function selectDuration(el, hours) { selectedDuration = hours; document.querySelectorAll('.duration-btn').forEach(b => b.classList.remove('selected')); el.classList.add('selected'); checkShowCompanions(); }
        function checkShowCompanions() { const section = document.getElementById('companionSection'), pkg = document.getElementById('fullPackage'); if (selectedDate && selectedTime && selectedDuration) { section.classList.add('visible'); pkg.classList.add('visible'); updatePrices(); } else { section.classList.remove('visible'); pkg.classList.remove('visible'); } }
        function updatePrices() { document.querySelectorAll('.companion-card').forEach(card => { const base = parseInt(card.dataset.basePrice), total = base * selectedDuration; card.querySelector('.companion-price strong').textContent = 'SAR ' + total; card.querySelector('.companion-price span').textContent = selectedDuration > 1 ? '/ ' + selectedDuration + ' hours' : '/ hour'; }); }
        function bookCompanion(id) { const info = companionInfo[id], total = info.basePrice * selectedDuration, dateStr = selectedDate.toLocaleDateString('en-US', {weekday:'short',month:'short',day:'numeric'}); document.getElementById('summaryCompanion').textContent = info.name; document.getElementById('summaryDate').textContent = dateStr; document.getElementById('summaryTime').textContent = selectedTime; document.getElementById('summaryDuration').textContent = selectedDuration + ' hour' + (selectedDuration>1?'s':''); document.getElementById('summaryTotal').textContent = 'SAR ' + total; document.getElementById('includedList').innerHTML = info.included.map(i => '<li>' + i + '</li>').join(''); document.getElementById('confirmModal').style.display = 'block'; document.body.style.overflow = 'hidden'; }
        function bookFullPackage() { const info = companionInfo.fullpackage, dateStr = selectedDate.toLocaleDateString('en-US', {weekday:'short',month:'short',day:'numeric'}); document.getElementById('summaryCompanion').textContent = info.name; document.getElementById('summaryDate').textContent = dateStr; document.getElementById('summaryTime').textContent = 'Sunset slot'; document.getElementById('summaryDuration').textContent = '3-hour experience'; document.getElementById('summaryTotal').textContent = 'SAR ' + info.basePrice; document.getElementById('includedList').innerHTML = info.included.map(i => '<li>' + i + '</li>').join(''); document.getElementById('confirmModal').style.display = 'block'; document.body.style.overflow = 'hidden'; }
        function closeModal() { document.getElementById('confirmModal').style.display = 'none'; document.body.style.overflow = ''; }
        function selectOccasion(el) { document.querySelectorAll('.occasion-pill').forEach(p => p.classList.remove('selected')); el.classList.add('selected'); }
        function completeReservation() { alert('Reservation complete!'); closeModal(); }
        document.addEventListener('click', e => { if (!e.target.closest('.calendar-dropdown') && !e.target.closest('.date-pill')) document.getElementById('calendarPanel').classList.remove('open'); });
        generateDatePills(); generateTimeSlots(); generateDuration(); renderCalendar();
    </script>
</body>
</html>
